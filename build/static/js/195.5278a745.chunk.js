"use strict";(self.webpackChunkreact_burger=self.webpackChunkreact_burger||[]).push([[195],{1290:(e,t,r)=>{r.d(t,{$:()=>a});r(5043);var n=r(1325),s=r(6064),i=r(579);const a=e=>{const{children:t,htmlType:r=n.Er.BUTTON,type:a=n.XN.PRIMARY,size:l=n.aK.MEDIUM,extraClass:c,onClick:o,...d}=e;return(0,i.jsx)(s.$n,{htmlType:r,type:a,size:l,extraClass:c,onClick:o,...d,children:t})}},1325:(e,t,r)=>{r.d(t,{Er:()=>s,XN:()=>n,aK:()=>i});let n=function(e){return e.SECONDARY="secondary",e.PRIMARY="primary",e}({}),s=function(e){return e.BUTTON="button",e.SUBMIT="submit",e.RESET="reset",e}({}),i=function(e){return e.SMALL="small",e.MEDIUM="medium",e.LARGE="large",e}({})},5195:(e,t,r)=>{r.r(t),r.d(t,{default:()=>Ae});var n=r(5043),s=r(8139),i=r.n(s),a=r(4223),l=r(7537),c=r(3216),o=r(3473),d=r(5964),m=r(5852),p=r(2734);let u=function(e){return e.BUN="BUN",e.INGREDIENT="INGREDIENT",e.SORTABLE="SORTABLE",e}({});var _=r(5269),x=r(6064);const g="constructor-element_constructorElement__k2Fng",h="constructor-element_constructorElementItem__r7Qh9",f="constructor-element_dragElementItem__PxtaU",N="constructor-element_isDragging__WenWw";var b=r(579);const j=e=>{const{id:t,_id:r,index:n=0,moveIngredient:s,isLocked:a,className:l,...c}=e,m=(0,o.jL)(),[{isDragging:j},y]=(0,p.i)({type:u.SORTABLE,item:{index:n},collect:e=>({isDragging:e.isDragging()})}),[,v]=(0,d.H)({accept:u.SORTABLE,hover:e=>{e.index!==n&&(null===s||void 0===s||s(e.index,n),e.index=n)}});return(0,b.jsxs)("li",{className:i()(g,{[N]:j}),draggable:!!a,ref:a?void 0:e=>y(v(e)),children:[!a&&(0,b.jsx)(x.WP,{type:"primary",className:i()(f,"mr-2")}),(0,b.jsx)(x.VM,{handleClose:()=>{m((0,_.KT)(t))},isLocked:a,extraClass:i()(h,{"ml-8":a},l),...c})]})};let y=function(e){return e.TOP="top",e.BOTTOM="bottom",e}({});const v="constructor-placeholder_constructorPlaceholder__kUwy5",E="constructor-placeholder_placeholderBunTop__1FWp-",I="constructor-placeholder_placeholderBunBottom__-FK3-",T="constructor-placeholder_dropOver__YX7x8",B="constructor-placeholder_canDrop__bcTtY",C=e=>{let{isBun:t,isTop:r}=e;const[{isOver:n,canDrop:s},a]=(0,d.H)({accept:t?u.BUN:u.INGREDIENT,collect:e=>({isOver:e.isOver(),canDrop:e.canDrop()})}),l=t?"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0431\u0443\u043b\u043a\u0443":"\u041f\u0435\u0440\u0435\u0442\u0430\u0449\u0438\u0442\u0435 \u0441\u043e\u0443\u0441 \u0438\u043b\u0438 \u043d\u0430\u0447\u0438\u043d\u043a\u0443",c=r?`${E}`:`${I}`;return(0,b.jsx)("div",{ref:a,className:i()(v,{[T]:n},{[B]:s},"ml-8",t&&c),children:(0,b.jsx)("p",{className:"text text_type_main-default text_color_inactive",children:l})})};var U=r(2099),G=r(6861),O=r(5909);const M=(0,U.Mz)(_.HG,(e=>{var t;return null===(t=e.filter((e=>e.type===G.I.BUN))[0])||void 0===t?void 0:t._id})),k=(0,U.Mz)(_.HG,(e=>(0,O.Q)(e))),D=(0,U.Mz)(_.HG,(e=>e.filter((e=>e.type!==G.I.BUN)).map((e=>null===e||void 0===e?void 0:e._id)))),A=(0,U.Mz)(_.HG,(e=>e.filter((e=>e.type!==G.I.BUN)))),V=(0,U.Mz)(_.HG,(e=>e.filter((e=>e.type===G.I.BUN))[0])),w="constructor-elements_constructorElements__Vw+c2",R="constructor-elements_editableConstructorElements__QhUS+ constructor-elements_constructorElements__Vw+c2",L=()=>{const e=(0,o.jL)(),t=(0,o.GV)(A),r=(0,o.GV)(V),s=(0,n.useCallback)((t=>{const{_id:r,price:n,type:s,imageMobile:i,name:a}=t;e((0,_.NV)({id:(0,m.A)(),_id:r,price:n,type:s,imageMobile:i,name:a}))}),[e]),[,i]=(0,d.H)({accept:[u.BUN,u.INGREDIENT],drop:s}),a=(n,s)=>{const i=[...t.map((e=>e.id))],[a]=i.splice(n,1);i.splice(s,0,a),e((0,_.X6)([r.id,...i,r.id]))};return(0,b.jsxs)("ul",{className:w,ref:i,children:[r?(0,b.jsx)(j,{type:y.TOP,isLocked:!0,_id:r._id,id:r._id,text:`${r.name} - \u0412\u0435\u0440\u0445'`,price:r.price,thumbnail:r.imageMobile}):(0,b.jsx)(C,{isBun:!0,isTop:!0}),(0,b.jsx)("ul",{className:R,children:t.length?t.map(((e,t)=>{let{price:r,imageMobile:n,name:s,id:i,_id:l}=e;return(0,b.jsx)(j,{_id:l,index:t,id:i,text:s,price:r,thumbnail:n,moveIngredient:a},i)})):(0,b.jsx)(C,{})}),r?(0,b.jsx)(j,{_id:r._id,id:r._id,type:y.BOTTOM,isLocked:!0,text:`${r.name} - \u041d\u0438\u0437'`,price:r.price,thumbnail:r.imageMobile}):(0,b.jsx)(C,{isBun:!0})]})};var S=r(1290),z=r(1325);const H="total-price_totalPrice__xp1gm",P="total-price_totalPriceIcon__U6uF+",$=e=>{let{onOrderAccept:t,disabled:r}=e;const n=(0,o.GV)(k);return(0,b.jsxs)("section",{className:i()(H,"mt-10"),children:[(0,b.jsx)("p",{className:"text text_type_digits-medium mr-2",children:n}),(0,b.jsx)(x.px,{type:"primary",className:i()(P,"mr-10")}),(0,b.jsx)(S.$,{htmlType:z.Er.SUBMIT,size:z.aK.LARGE,onClick:t,disabled:r,children:"\u041e\u0444\u043e\u0440\u043c\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437"})]})};var F=r(4688);const Q=e=>e.orderDetails.orderDetails.order.number,K=e=>e.orderDetails.error,W=e=>e.orderDetails.isLoading;var Y,X,Z,q,J;function ee(){return ee=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ee.apply(null,arguments)}function te(e,t){let{title:r,titleId:s,...i}=e;return n.createElement("svg",ee({fill:"none",height:102,viewBox:"0 0 107 102",width:107,xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":s},i),r?n.createElement("title",{id:s},r):null,Y||(Y=n.createElement("linearGradient",{id:"a"},n.createElement("stop",{offset:0,stopColor:"#801ab3",stopOpacity:0}),n.createElement("stop",{offset:1,stopColor:"#4c4cff"}))),X||(X=n.createElement("radialGradient",{id:"b",cx:0,cy:0,gradientTransform:"matrix(48.99995387 -51.0000182 38.36416459 36.8596397 53 51)",gradientUnits:"userSpaceOnUse",r:1,xlinkHref:"#a"})),Z||(Z=n.createElement("radialGradient",{id:"c",cx:0,cy:0,gradientTransform:"matrix(53.50001019 -50.0000102 37.55596349 40.18488039 53.5 51)",gradientUnits:"userSpaceOnUse",r:1,xlinkHref:"#a"})),q||(q=n.createElement("radialGradient",{id:"d",cx:0,cy:0,gradientTransform:"matrix(-34.0001502 32.66654032 -24.57298076 -25.57617147 53 50.6667)",gradientUnits:"userSpaceOnUse",r:1},n.createElement("stop",{offset:0,stopColor:"#801ab3",stopOpacity:0}),n.createElement("stop",{offset:1,stopColor:"#4c4cff",stopOpacity:.5}))),J||(J=n.createElement("g",{clipRule:"evenodd",fillRule:"evenodd"},n.createElement("g",{fillOpacity:.25},n.createElement("path",{d:"m8.36637 37.3873c-5.82183 8.1171-5.82182 19.1084 0 27.2254l19.96723 27.8391c5.8218 8.1172 16.1412 11.5132 25.5611 8.4132l32.3076-10.6337c9.42-3.1004 15.7977-11.9926 15.7977-22.0258v-34.411c0-10.0333-6.3778-18.9254-15.7977-22.0258l-32.3076-10.63362c-9.4199-3.10044-19.7393.29606-25.5611 8.41311z",fill:"url(#b)"}),n.createElement("path",{d:"m103.944 39.453c4.075 7.1453 4.075 15.9487 0 23.094l-15.3444 26.906c-4.0749 7.1453-11.6056 11.547-19.7554 11.547h-30.6884c-8.1498 0-15.6805-4.4017-19.7554-11.547l-15.34423-26.906c-4.07489-7.1453-4.07489-15.9487 0-23.094l15.34423-26.906c4.0749-7.14531 11.6056-11.547 19.7554-11.547h30.6884c8.1498 0 15.6805 4.40169 19.7554 11.547z",fill:"url(#c)"}),n.createElement("path",{d:"m43.9249 20.9109c5.4113-3.8812 12.7389-3.8812 18.1502 0l18.5594 13.3115c5.4114 3.8812 7.6757 10.7608 5.6088 17.0408l-7.0891 21.5384c-2.0669 6.2799-7.995 10.5317-14.6839 10.5317h-22.9407c-6.6888 0-12.6169-4.2518-14.6838-10.5317l-7.0891-21.5384c-2.0669-6.28.1974-13.1596 5.6088-17.0408z",fill:"url(#d)"})),n.createElement("path",{d:"m73.3122 37.5959c.8877.8213.9205 2.1847.073 3.0451l-23.3333 23.6923c-.4247.4313-1.0148.6726-1.6299.6666s-1.2-.2589-1.6157-.6983l-12.2222-12.9231c-.8293-.8769-.7682-2.2393.1365-3.0431s2.3104-.7446 3.1398.1323l10.6169 11.2257 21.693-22.0267c.8474-.8605 2.2541-.8922 3.1419-.0708z",fill:"#f2f2f3"}))))}const re=n.forwardRef(te),ne=(r.p,"order-details_orderIcon__Yv49a"),se=()=>{const e=(0,o.GV)(Q),t=(0,o.GV)(K),r=(0,o.GV)(W);return!e&&t?(0,b.jsx)("p",{className:"text text_type_main-large mt-15",children:"\u041e\u0448\u0438\u0431\u043a\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0441\u043d\u043e\u0432\u0430!"}):r?(0,b.jsx)("p",{className:"text text_type_main-large mt-15",children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):(0,b.jsxs)(n.Fragment,{children:[(0,b.jsx)("p",{className:"text text_type_digits-large mt-4 mb-8",children:e}),(0,b.jsx)("p",{className:"text text_type_main-medium mb-15",children:"\u0438\u0434\u0435\u043d\u0442\u0438\u0444\u0438\u043a\u0430\u0442\u043e\u0440 \u0437\u0430\u043a\u0430\u0437\u0430"}),(0,b.jsx)(re,{className:ne}),(0,b.jsx)("p",{className:"text text_type_main-small mt-15",children:"\u0412\u0430\u0448 \u0437\u0430\u043a\u0430\u0437 \u043d\u0430\u0447\u0430\u043b\u0438 \u0433\u043e\u0442\u043e\u0432\u0438\u0442\u044c"}),(0,b.jsx)("p",{className:"text text_type_main-small text_color_inactive mt-2 mb-20",children:"\u0414\u043e\u0436\u0434\u0438\u0442\u0435\u0441\u044c \u0433\u043e\u0442\u043e\u0432\u043d\u043e\u0441\u0442\u0438 \u043d\u0430 \u043e\u0440\u0431\u0438\u0442\u0430\u043b\u044c\u043d\u043e\u0439 \u0441\u0442\u0430\u043d\u0446\u0438\u0438"})]})};var ie=r(2336),ae=r(6394),le=r(9619),ce=r(7120);const oe="burger-constructor_burgerConstructor__7rctq",de=()=>{const[e,t]=(0,n.useState)(!1),r=(0,o.GV)(ie.CB),s=(0,c.Zp)(),a=(0,o.jL)(),l=(0,o.GV)(W),d=(0,o.GV)(M),m=(0,o.GV)(D),p=[d,...m,d],u=l||!d||!m.length;return(0,b.jsxs)("section",{className:i()(oe,"mt-25 ml-4 mr-4"),children:[(0,b.jsx)(L,{}),(0,b.jsx)($,{onOrderAccept:()=>{r?(t(!e),a((0,ae.f)({data:p}))):s(ce.pM)},disabled:u}),e&&(0,b.jsx)(F.a,{onCloseHandler:()=>{t(!e),a((0,le.u)())},children:(0,b.jsx)(se,{})})]})};var me=r(5843);const pe="ingredient-card_ingredientCard__CJbbl",ue="ingredient-card_price__e9S8x",_e="ingredient-card_counter__9mVxC",xe="ingredient-card_imageContainer__7Klv0",ge="ingredient-card_name__Qz5ne",he="ingredient-card_drag__53B-Q",fe=e=>{let{ingredient:t}=e;const{image:r,name:s,price:a,_id:l,type:d,image_mobile:m}=t,_=(0,c.Zp)(),g=(0,c.zy)(),h=(0,o.GV)(D),f=(0,o.GV)(M),N=(0,n.useMemo)((()=>d===G.I.BUN&&f===l?2:d!==G.I.BUN&&h.length?h.filter((e=>e===l)).length:null),[l,f,h,d]),[{isDrag:j},y]=(0,p.i)((()=>({type:d===G.I.BUN?u.BUN:u.INGREDIENT,item:{_id:l,price:a,type:d,name:s,imageMobile:m},collect:e=>({isDrag:e.isDragging(),handlerId:e.getHandlerId()})})));return(0,b.jsx)(n.Fragment,{children:(0,b.jsxs)("li",{ref:y,className:i()(pe,{[he]:j}),onClick:()=>{_(`${ce.U7}/${l}`,{state:{backgroundLocation:g}})},draggable:!0,children:[(0,b.jsxs)("div",{className:i()(xe,"mb-1 pl-4 pr-4"),children:[(0,b.jsx)("img",{src:r,alt:r}),N?(0,b.jsx)(x.ph,{count:N,size:"default",extraClass:_e}):null]}),(0,b.jsxs)("span",{className:i()(ue,"mb-1"),children:[(0,b.jsx)("p",{className:"text text_type_digits-default mr-2",children:a}),(0,b.jsx)(x.px,{type:"primary"})]}),(0,b.jsx)("p",{className:i()(ge,"text text_type_main-small mt-2"),children:s})]})})};var Ne=r(3734);const be="ingredients-items_ingredientsItems__5CF2y",je=e=>{let{ingredientsIds:t}=e;const r=(0,o.GV)((0,Ne.W9)(t));return(0,b.jsx)("ul",{className:i()(be,"pt-6 pl-4 pb-10 pr-4"),children:r.map((e=>(0,b.jsx)(fe,{ingredient:e},e._id)))})},ye="ingredients-category_ingredientsCategory__6RHpz",ve={[G.I.BUN]:"\u0411\u0443\u043b\u043a\u0438",[G.I.SAUCE]:"\u0421\u043e\u0443\u0441\u044b",[G.I.MAIN]:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"},Ee=e=>{let{ingredientsIds:t,category:r,setActiveTab:s}=e;const{ref:i,inView:a}=(0,me.Wx)({threshold:.1});return(0,n.useEffect)((()=>{s(r,a)}),[r,a,s]),(0,b.jsxs)("li",{className:ye,ref:i,id:r,children:[(0,b.jsx)("p",{className:"text text_type_main-medium",children:ve[r]}),(0,b.jsx)(je,{ingredientsIds:t})]})},Ie="ingredients-list_ingredientsList__xfhDu",Te=e=>{let{ingredients:t,setActiveTab:r}=e;return(0,b.jsx)("ul",{className:Ie,children:Object.entries(t).map((e=>{let[t,n]=e;return(0,b.jsx)(Ee,{setActiveTab:r,category:t,ingredientsIds:n},t)}))})},Be="tabs_tabsContainer__wtpsM",Ce=e=>{const{currentTab:t,tabClickHandler:r=()=>{},tabs:n,className:s}=e;return(0,b.jsx)("div",{className:i()(Be,s),children:n.map((e=>{let{name:n,value:s}=e;return(0,b.jsx)(x.oz,{value:s,active:t===s,onClick:r,children:n},s)}))})};var Ue=r(1841);const Ge=["bun","sauce","main"],Oe=()=>{const e=(0,o.jL)(),[t,r]=(0,n.useState)(G.I.BUN),[s,i]=(0,n.useState)([]),a=(0,o.GV)(Ne.Zy),l=(0,o.GV)(Ne.$x),c=(0,o.GV)(Ne.DA);(0,n.useEffect)((()=>{a[G.I.MAIN].length||e((0,Ue.L)())}),[e,a]);const d=[{value:G.I.BUN,name:"\u0411\u0443\u043b\u043a\u0438"},{value:G.I.SAUCE,name:"\u0421\u043e\u0443\u0441\u044b"},{value:G.I.MAIN,name:"\u041d\u0430\u0447\u0438\u043d\u043a\u0438"}],m=(0,n.useCallback)(((e,t)=>{i((r=>t&&!r.includes(e)?[...r,e]:t?r:[...r].filter((t=>t!==e))))}),[]);(0,n.useEffect)((()=>{s.length>0&&r(s.sort(((e,t)=>Ge.indexOf(e)-Ge.indexOf(t)))[0])}),[s,s.length]);return l?(0,b.jsx)("h1",{children:l}):(0,b.jsxs)("section",{className:"mt-10",children:[(0,b.jsx)("h1",{className:"text text_type_main-large mb-5",children:"\u0421\u043e\u0431\u0435\u0440\u0438\u0442\u0435 \u0431\u0443\u0440\u0433\u0435\u0440"}),(0,b.jsx)(Ce,{tabs:d,currentTab:t,className:"mb-10",tabClickHandler:e=>{r(e);const t=document.getElementById(e);t&&t.scrollIntoView()}}),c?(0,b.jsx)("h1",{children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):(0,b.jsx)(Te,{ingredients:a,setActiveTab:m})]})};var Me=r(893);const ke="burger-constructor-page_burgerConstructorPage__gsQPB",De=()=>(0,b.jsx)(Me.H,{className:i()(ke,"pl-5 pr-5"),children:(0,b.jsxs)(a.Q,{backend:l.t2,children:[(0,b.jsx)(Oe,{}),(0,b.jsx)(de,{})]})}),Ae=(0,n.memo)(De)}}]);
//# sourceMappingURL=195.5278a745.chunk.js.map